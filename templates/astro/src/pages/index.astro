---
import BaseLayout from '../layouts/BaseLayout.astro';
import { getAllPages } from '../lib/content-api';

const pages = await getAllPages();
---

<BaseLayout
  title="{{PROJECT_NAME}}"
  description="Welcome to {{PROJECT_NAME}}"
>
  <div class="container mx-auto px-4 sm:px-6 lg:px-8 py-20">
    <h1 class="text-4xl lg:text-5xl font-bold text-center mb-4 text-gray-900">
      Welcome to {{PROJECT_NAME}}
    </h1>

    {pages.length === 0 ? (
      <div class="text-center mt-12">
        <p class="text-xl text-gray-600 mb-8">
          No pages published yet. Create your first page in LiteShow!
        </p>
      </div>
    ) : (
      <div class="mt-12 max-w-4xl mx-auto">
        <h2 class="text-2xl font-semibold mb-6 text-gray-900">Published Pages</h2>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
          {pages.map((page) => (
            <a
              href={`/${page.slug}`}
              class="block p-6 bg-white rounded-2xl shadow-sm hover:shadow-md transition-shadow duration-200 border border-gray-100"
            >
              <h3 class="text-xl font-semibold mb-2 text-gray-900">
                {page.title}
              </h3>
              {page.seo_description && (
                <p class="text-gray-600 line-clamp-2">
                  {page.seo_description}
                </p>
              )}
              <div class="mt-4 text-blue-600 font-medium flex items-center">
                View page
                <svg class="w-4 h-4 ml-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
                </svg>
              </div>
            </a>
          ))}
        </div>
      </div>
    )}
  </div>
</BaseLayout>

<style>
  .line-clamp-2 {
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }
</style>
